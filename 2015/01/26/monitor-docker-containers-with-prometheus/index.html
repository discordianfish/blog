<!DOCTYPE html><html><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><link rel="preload" href="/component---src-layouts-index-js-e4ac5a74a4e0c6af744e.js" as="script"/><link rel="preload" href="/component---src-templates-blog-post-js-3641edfbbd92534946e5.js" as="script"/><link rel="preload" href="/path---2015-01-26-monitor-docker-containers-with-prometheus-41620a92db4e19f15cc1.js" as="script"/><link rel="preload" href="/app-4bea43eaf62c6707085c.js" as="script"/><link rel="preload" href="/commons-fcbb8af1639fee4f6844.js" as="script"/><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><title data-react-helmet="true">Monitor Docker Containers with Prometheus | 5π Consulting</title><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:125%/1.45 'Quattrocento Sans',serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.8);font-family:'Quattrocento Sans',serif;font-weight:400;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;color:hsla(0,0%,0%,0.9);font-family:'Work Sans',sans-serif;font-weight:600;text-rendering:optimizeLegibility;font-size:2rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;color:hsla(0,0%,0%,0.9);font-family:'Work Sans',sans-serif;font-weight:600;text-rendering:optimizeLegibility;font-size:1.51572rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;color:hsla(0,0%,0%,0.9);font-family:'Work Sans',sans-serif;font-weight:600;text-rendering:optimizeLegibility;font-size:1.31951rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;color:hsla(0,0%,0%,0.9);font-family:'Work Sans',sans-serif;font-weight:600;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;color:hsla(0,0%,0%,0.9);font-family:'Work Sans',sans-serif;font-weight:600;text-rendering:optimizeLegibility;font-size:0.87055rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;color:hsla(0,0%,0%,0.9);font-family:'Work Sans',sans-serif;font-weight:600;text-rendering:optimizeLegibility;font-size:0.81225rem;line-height:1.1;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}ul{margin-left:1.45rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.45rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;font-size:0.85rem;line-height:1.45rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;font-size:1rem;line-height:1.45rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}blockquote{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0.90625rem;padding-right:0;padding-top:0;margin-bottom:1.45rem;font-size:1.1487rem;line-height:1.45rem;border-left:0.54375rem solid #1ca086;color:hsla(0,0%,0%,0.65);font-style:italic;}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.45rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;}li{margin-bottom:calc(1.45rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.45rem;margin-bottom:calc(1.45rem / 2);margin-top:calc(1.45rem / 2);}li > ul{margin-left:1.45rem;margin-bottom:calc(1.45rem / 2);margin-top:calc(1.45rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.45rem / 2);}code{font-size:0.85rem;line-height:1.45rem;}kbd{font-size:0.85rem;line-height:1.45rem;}samp{font-size:0.85rem;line-height:1.45rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:0.96667rem;padding-right:0.96667rem;padding-top:0.725rem;padding-bottom:calc(0.725rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}a{color:#333;text-decoration:none;text-shadow:.03em 0 #fff,-.03em 0 #fff,0 .03em #fff,0 -.03em #fff,.06em 0 #fff,-.06em 0 #fff,.09em 0 #fff,-.09em 0 #fff,.12em 0 #fff,-.12em 0 #fff,.15em 0 #fff,-.15em 0 #fff;background-image:linear-gradient(to top, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0) 1px, #1ca086 1px, #1ca086 2px, rgba(0, 0, 0, 0) 2px);}a:hover,a:active{text-shadow:none;background-image:none;}h1,h2,h3,h4,h5,h6{margin-top:2.175rem;margin-bottom:0.725rem;}blockquote > :last-child{margin-bottom:0;}blockquote cite{font-size:1rem;line-height:1.45rem;color:hsla(0,0%,0%,0.8);font-style:normal;font-weight:400;}blockquote cite:before{content:"— ";}@media only screen and (max-width:480px){html{font-size:106.25%;line-height:24.65px;}blockquote{border-left:0.27187rem solid #1ca086;color:hsla(0,0%,0%,0.59);padding-left:0.81563rem;font-style:italic;margin-left:-1.0875rem;margin-right:0;}}</style><link href="//fonts.googleapis.com/css?family=Work+Sans:600|Quattrocento+Sans:400,400i,700" rel="stylesheet" type="text/css"/><style id="gatsby-inlined-css">@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:100;src:local("Montserrat Thin "),local("Montserrat-Thin"),url(/static/montserrat-latin-100.50d27986.woff2) format("woff2"),url(/static/montserrat-latin-100.5e334eff.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:100;src:local("Montserrat Thin italic"),local("Montserrat-Thinitalic"),url(/static/montserrat-latin-100italic.8c070533.woff2) format("woff2"),url(/static/montserrat-latin-100italic.03e19243.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:200;src:local("Montserrat Extra Light "),local("Montserrat-Extra Light"),url(/static/montserrat-latin-200.4343d3d9.woff2) format("woff2"),url(/static/montserrat-latin-200.f2022ecd.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:200;src:local("Montserrat Extra Light italic"),local("Montserrat-Extra Lightitalic"),url(/static/montserrat-latin-200italic.116c4c4b.woff2) format("woff2"),url(/static/montserrat-latin-200italic.89614a60.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:300;src:local("Montserrat Light "),local("Montserrat-Light"),url(/static/montserrat-latin-300.d2ad295b.woff2) format("woff2"),url(/static/montserrat-latin-300.3a371ee0.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:300;src:local("Montserrat Light italic"),local("Montserrat-Lightitalic"),url(/static/montserrat-latin-300italic.f6b6bf24.woff2) format("woff2"),url(/static/montserrat-latin-300italic.16521668.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:400;src:local("Montserrat Regular "),local("Montserrat-Regular"),url(/static/montserrat-latin-400.240a8444.woff2) format("woff2"),url(/static/montserrat-latin-400.b20cc131.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:400;src:local("Montserrat Regular italic"),local("Montserrat-Regularitalic"),url(/static/montserrat-latin-400italic.86172bb8.woff2) format("woff2"),url(/static/montserrat-latin-400italic.9405e787.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:500;src:local("Montserrat Medium "),local("Montserrat-Medium"),url(/static/montserrat-latin-500.fb8d6b71.woff2) format("woff2"),url(/static/montserrat-latin-500.50825d47.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:500;src:local("Montserrat Medium italic"),local("Montserrat-Mediumitalic"),url(/static/montserrat-latin-500italic.c0a555a4.woff2) format("woff2"),url(/static/montserrat-latin-500italic.635de59c.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:600;src:local("Montserrat SemiBold "),local("Montserrat-SemiBold"),url(/static/montserrat-latin-600.d5615136.woff2) format("woff2"),url(/static/montserrat-latin-600.f300da4f.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:600;src:local("Montserrat SemiBold italic"),local("Montserrat-SemiBolditalic"),url(/static/montserrat-latin-600italic.10f29d13.woff2) format("woff2"),url(/static/montserrat-latin-600italic.2bc37d86.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:700;src:local("Montserrat Bold "),local("Montserrat-Bold"),url(/static/montserrat-latin-700.7d77e1f0.woff2) format("woff2"),url(/static/montserrat-latin-700.81826529.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:700;src:local("Montserrat Bold italic"),local("Montserrat-Bolditalic"),url(/static/montserrat-latin-700italic.1dd2b53f.woff2) format("woff2"),url(/static/montserrat-latin-700italic.c162d257.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:800;src:local("Montserrat ExtraBold "),local("Montserrat-ExtraBold"),url(/static/montserrat-latin-800.d4e7bf86.woff2) format("woff2"),url(/static/montserrat-latin-800.895aadbf.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:800;src:local("Montserrat ExtraBold italic"),local("Montserrat-ExtraBolditalic"),url(/static/montserrat-latin-800italic.fc0cbe44.woff2) format("woff2"),url(/static/montserrat-latin-800italic.b3362875.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:900;src:local("Montserrat Black "),local("Montserrat-Black"),url(/static/montserrat-latin-900.c8bdd772.woff2) format("woff2"),url(/static/montserrat-latin-900.1b99ef78.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:900;src:local("Montserrat Black italic"),local("Montserrat-Blackitalic"),url(/static/montserrat-latin-900italic.cb72c1f9.woff2) format("woff2"),url(/static/montserrat-latin-900italic.b78bb9f8.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:300;src:local("Merriweather Light "),local("Merriweather-Light"),url(/static/merriweather-latin-300.f015f1e9.woff2) format("woff2"),url(/static/merriweather-latin-300.92dfe81b.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:300;src:local("Merriweather Light italic"),local("Merriweather-Lightitalic"),url(/static/merriweather-latin-300italic.7fd86b32.woff2) format("woff2"),url(/static/merriweather-latin-300italic.878b76f5.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:400;src:local("Merriweather Regular "),local("Merriweather-Regular"),url(/static/merriweather-latin-400.12dbf4c0.woff2) format("woff2"),url(/static/merriweather-latin-400.1fffad22.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:400;src:local("Merriweather Regular italic"),local("Merriweather-Regularitalic"),url(/static/merriweather-latin-400italic.1e0d3e81.woff2) format("woff2"),url(/static/merriweather-latin-400italic.de18d4c4.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:700;src:local("Merriweather Bold "),local("Merriweather-Bold"),url(/static/merriweather-latin-700.dc8fec81.woff2) format("woff2"),url(/static/merriweather-latin-700.d7d2ed8e.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:700;src:local("Merriweather Bold italic"),local("Merriweather-Bolditalic"),url(/static/merriweather-latin-700italic.b7b7e5da.woff2) format("woff2"),url(/static/merriweather-latin-700italic.6210a5fc.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:900;src:local("Merriweather Black "),local("Merriweather-Black"),url(/static/merriweather-latin-900.43f870d5.woff2) format("woff2"),url(/static/merriweather-latin-900.8f3806df.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:900;src:local("Merriweather Black italic"),local("Merriweather-Blackitalic"),url(/static/merriweather-latin-900italic.168c1ab2.woff2) format("woff2"),url(/static/merriweather-latin-900italic.ae7778f0.woff) format("woff")}@font-face{font-family:fontello;src:url(/static/fontello.1f1e37ad.eot);src:url(/static/fontello.1f1e37ad.eot#iefix) format("embedded-opentype"),url(/static/fontello.c83454bd.woff2) format("woff2"),url(/static/fontello.a05a3791.woff) format("woff"),url(/static/fontello.cec4b829.ttf) format("truetype"),url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/Pgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxtZXRhZGF0YT5Db3B5cmlnaHQgKEMpIDIwMTcgYnkgb3JpZ2luYWwgYXV0aG9ycyBAIGZvbnRlbGxvLmNvbTwvbWV0YWRhdGE+CjxkZWZzPgo8Zm9udCBpZD0iZm9udGVsbG8iIGhvcml6LWFkdi14PSIxMDAwIiA+Cjxmb250LWZhY2UgZm9udC1mYW1pbHk9ImZvbnRlbGxvIiBmb250LXdlaWdodD0iNDAwIiBmb250LXN0cmV0Y2g9Im5vcm1hbCIgdW5pdHMtcGVyLWVtPSIxMDAwIiBhc2NlbnQ9Ijg1MCIgZGVzY2VudD0iLTE1MCIgLz4KPG1pc3NpbmctZ2x5cGggaG9yaXotYWR2LXg9IjEwMDAiIC8+CjxnbHlwaCBnbHlwaC1uYW1lPSJ0d2l0dGVyIiB1bmljb2RlPSImI3hmMDk5OyIgZD0iTTkwNCA2MjJxLTM3LTU0LTkwLTkzIDAtOCAwLTIzIDAtNzMtMjEtMTQ1dC02NC0xMzktMTAzLTExNy0xNDQtODItMTgxLTMwcS0xNTEgMC0yNzYgODEgMTktMiA0My0yIDEyNiAwIDIyNCA3Ny01OSAxLTEwNSAzNnQtNjQgODlxMTktMyAzNC0zIDI0IDAgNDggNi02MyAxMy0xMDQgNjJ0LTQxIDExNXYycTM4LTIxIDgyLTIzLTM3IDI1LTU5IDY0dC0yMiA4NnEwIDQ5IDI1IDkxIDY4LTgzIDE2NC0xMzN0MjA4LTU1cS01IDIxLTUgNDEgMCA3NSA1MyAxMjd0MTI3IDUzcTc5IDAgMTMyLTU3IDYxIDEyIDExNSA0NC0yMS02NC04MC0xMDAgNTIgNiAxMDQgMjh6IiBob3Jpei1hZHYteD0iOTI4LjYiIC8+Cgo8Z2x5cGggZ2x5cGgtbmFtZT0iZ2l0aHViLWNpcmNsZWQiIHVuaWNvZGU9IiYjeGYwOWI7IiBkPSJNNDI5IDc3OXExMTYgMCAyMTUtNTh0MTU2LTE1NiA1Ny0yMTVxMC0xNDAtODItMjUydC0yMTEtMTU1cS0xNS0zLTIyIDR0LTcgMTdxMCAxIDAgNDN0MCA3NXEwIDU0LTI5IDc5IDMyIDMgNTcgMTB0NTMgMjIgNDUgMzcgMzAgNTggMTEgODRxMCA2Ny00NCAxMTUgMjEgNTEtNCAxMTQtMTYgNS00Ni02dC01MS0yNWwtMjEtMTNxLTUyIDE1LTEwNyAxNXQtMTA4LTE1cS04IDYtMjMgMTV0LTQ3IDIyLTQ3IDdxLTI1LTYzLTUtMTE0LTQ0LTQ4LTQ0LTExNSAwLTQ3IDEyLTgzdDI5LTU5IDQ1LTM3IDUyLTIyIDU3LTEwcS0yMS0yMC0yNy01OC0xMi01LTI1LTh0LTMyLTMtMzYgMTItMzEgMzVxLTExIDE4LTI3IDI5dC0yOCAxNGwtMTEgMXEtMTIgMC0xNi0ydC0zLTcgNS04IDctNmw0LTNxMTItNiAyNC0yMXQxOC0yOWw2LTEzcTctMjEgMjQtMzR0MzctMTcgMzktMyAzMSAxbDEzIDNxMC0yMiAwLTUwdDEtMzBxMC0xMC04LTE3dC0yMi00cS0xMjkgNDMtMjExIDE1NXQtODIgMjUycTAgMTE3IDU4IDIxNXQxNTUgMTU2IDIxNiA1OHogbS0yNjctNjE2cTIgNC0zIDctNiAxLTgtMS0xLTQgNC03IDUtMyA3IDF6IG0xOC0xOXE0IDMtMSA5LTYgNS05IDItNC0zIDEtOSA1LTYgOS0yeiBtMTYtMjVxNiA0IDAgMTEtNCA3LTkgMy01LTMgMC0xMHQ5LTR6IG0yNC0yM3E0IDQtMiAxMC03IDctMTEgMi01LTUgMi0xMSA2LTYgMTEtMXogbTMyLTE0cTEgNi04IDktOCAyLTEwLTR0Ny05cTgtMyAxMSA0eiBtMzUtM3EwIDctMTAgNi05IDAtOS02IDAtNyAxMC02IDkgMCA5IDZ6IG0zMiA1cS0xIDctMTAgNS05LTEtOC04dDEwLTQgOCA3eiIgaG9yaXotYWR2LXg9Ijg1Ny4xIiAvPgoKPGdseXBoIGdseXBoLW5hbWU9ImZhY2Vib29rLW9mZmljaWFsIiB1bmljb2RlPSImI3hmMjMwOyIgZD0iTTgxMCA3NzlxMTkgMCAzMy0xNHQxNC0zNHYtNzYycTAtMjAtMTQtMzR0LTMzLTE0aC0yMTh2MzMzaDExMWwxNiAxMjloLTEyN3Y4M3EwIDMxIDEzIDQ2dDUxIDE2bDY4IDF2MTE1cS0zNSA1LTEwMCA1LTc1IDAtMTIxLTQ0dC00NS0xMjd2LTk1aC0xMTJ2LTEyOWgxMTJ2LTMzM2gtNDExcS0xOSAwLTMzIDE0dC0xNCAzNHY3NjJxMCAyMCAxNCAzNHQzMyAxNGg3NjN6IiBob3Jpei1hZHYteD0iODU3LjEiIC8+Cgo8Z2x5cGggZ2x5cGgtbmFtZT0iZ2l0aHViLXNxdWFyZWQiIHVuaWNvZGU9IiYjeGYzMDA7IiBkPSJNMjkwIDE4MHEyIDQtMiA4LTUgNC04IDEtMi00IDItNyA1LTQgOC0yeiBtLTE2IDIzcS0zIDQtNyAzLTMtMyAwLTcgNC01IDctMyAzIDIgMCA3eiBtLTIzIDIzcTEgMi0zIDQtNCAxLTQtMS0yLTMgMi01IDUtMSA1IDJ6IG0xMi0xM3ExIDAgMSAydC0yIDNxLTQgNC02IDJ0MS02cTMtMyA2LTF6IG00OC00MnExIDQtNSA2LTUgMi03LTItMi00IDUtNiA1LTIgNyAyeiBtMjMtMnEwIDUtNiA1LTYgMC02LTV0Ni00IDYgNHogbTIyIDRxLTEgNC03IDN0LTUtNXExLTUgNi0zdDYgNXogbTM1OCAxNzdxMCAxMTgtODMgMjAydC0yMDIgODQtMjAyLTg0LTg0LTIwMnEwLTkzIDU1LTE2OHQxNDAtMTAzcTEwLTIgMTUgM3Q1IDExcTAgMjktMSA1My0zLTEtOC0ydC0yMC0xLTI3IDMtMjQgMTEtMTcgMjNxLTEzIDMzLTMyIDQxLTEgMS0yIDJsLTUgNXQtMyA1IDIgNCAxMSAycTMgMCA4LTF0MTctOSAxOC0yMHE5LTE1IDIxLTIzdDI0LTggMjIgMiAxNiA1cTQgMjcgMTkgMzktMjggMy00OCAxMHQtNDEgMjItMzEgNDItMTEgNjdxMCA0NCAzMCA3Ny0xNCAzNCAzIDc1IDEwIDQgMzAtNHQzNC0xNmwxNC05cTMzIDkgNzIgOXQ3MS05cTYgNCAxNiAxMHQzMSAxNCAzMiA1cTE2LTQxIDMtNzUgMjktMzMgMjktNzcgMC0zMi04LTU2dC0yMC0zOS0yOS0yNS0zNS0xNC0zOC03cTE5LTE3IDE5LTUzIDAtMjIgMC01MHQtMS0yOHEwLTcgNS0xMXQxNS0zcTg2IDI5IDE0MSAxMDN0NTQgMTY4eiBtMTQzIDI2OHYtNTM2cTAtNjYtNDctMTEzdC0xMTQtNDhoLTUzNXEtNjcgMC0xMTQgNDh0LTQ3IDExM3Y1MzZxMCA2NiA0NyAxMTN0MTE0IDQ4aDUzNXE2NyAwIDExNC00OHQ0Ny0xMTN6IiBob3Jpei1hZHYteD0iODU3LjEiIC8+Cgo8Z2x5cGggZ2x5cGgtbmFtZT0idHdpdHRlci1zcXVhcmVkIiB1bmljb2RlPSImI3hmMzA0OyIgZD0iTTcxNCA1MTBxLTMxLTE0LTY3LTE5IDM4IDIyIDUyIDY1LTM3LTIxLTc1LTI4LTM0IDM2LTg1IDM2LTQ5IDAtODMtMzR0LTM1LTgzcTAtMTYgMy0yNy03MiA0LTEzNSAzN3QtMTA3IDg2cS0xNi0yOC0xNi01OSAwLTY0IDUxLTk4LTI3IDEtNTYgMTV2LTFxMC00MiAyOC03NXQ2OC00MHEtMTYtNS0yOC01LTcgMC0yMiAzIDEyLTM2IDQyLTU5dDY3LTIzcS02NC01MC0xNDUtNTAtMTUgMC0yOCAyIDgyLTUzIDE4MC01MyA2MiAwIDExNyAyMHQ5NCA1MyA2NyA3NiA0MiA5MSAxMyA5NHEwIDEwIDAgMTUgMzUgMjUgNTggNjF6IG0xNDMgMTA4di01MzZxMC02Ni00Ny0xMTN0LTExNC00OGgtNTM1cS02NyAwLTExNCA0OHQtNDcgMTEzdjUzNnEwIDY2IDQ3IDExM3QxMTQgNDhoNTM1cTY3IDAgMTE0LTQ4dDQ3LTExM3oiIGhvcml6LWFkdi14PSI4NTcuMSIgLz4KCjxnbHlwaCBnbHlwaC1uYW1lPSJmYWNlYm9vay1zcXVhcmVkIiB1bmljb2RlPSImI3hmMzA4OyIgZD0iTTY5NiA3NzlxNjcgMCAxMTQtNDh0NDctMTEzdi01MzZxMC02Ni00Ny0xMTN0LTExNC00OGgtMTA0djMzM2gxMTFsMTYgMTI5aC0xMjd2ODNxMCAzMSAxMyA0NnQ1MSAxNmw2OCAxdjExNXEtMzUgNS0xMDAgNS03NSAwLTEyMS00NHQtNDUtMTI3di05NWgtMTEydi0xMjloMTEydi0zMzNoLTI5N3EtNjcgMC0xMTQgNDh0LTQ3IDExM3Y1MzZxMCA2NiA0NyAxMTN0MTE0IDQ4aDUzNXoiIGhvcml6LWFkdi14PSI4NTcuMSIgLz4KPC9mb250Pgo8L2RlZnM+Cjwvc3ZnPg==#fontello) format("svg");font-weight:400;font-style:normal}[class*=" icon-"]:before,[class^=icon-]:before{font-family:fontello;font-style:normal;font-weight:400;speak:none;display:inline-block;text-decoration:inherit;width:1em;margin-right:.2em;text-align:center;-webkit-font-feature-settings:normal;font-feature-settings:normal;font-variant:normal;text-transform:none;line-height:1em;margin-left:.2em;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-twitter:before{content:"\F099"}.icon-github-circled:before{content:"\F09B"}.icon-facebook-official:before{content:"\F230"}.icon-github-squared:before{content:"\F300"}.icon-twitter-squared:before{content:"\F304"}.icon-facebook-squared:before{content:"\F308"}</style></head><body><div id="___gatsby"><div style="max-width:34.8rem;margin-left:auto;margin-right:auto;padding:2.175rem 1.0875rem;" data-reactroot="" data-reactid="1" data-react-checksum="-560002254"><h1 style="margin-top:0;margin-bottom:-1.45rem;font-size:400%;" data-reactid="2"><a style="box-shadow:none;text-decoration:none;color:inherit;" href="/" data-reactid="3">5π Consulting</a></h1><div data-reactid="4"><!-- react-empty: 5 --><h1 data-reactid="6">Monitor Docker Containers with Prometheus</h1><p style="font-size:0.87055rem;line-height:1.45rem;display:block;" data-reactid="7">January 26, 2015</p><div data-reactid="8"><h3>Monitoring Docker</h3>
<p>Running all your services in containers makes it possible to get in-depth resource and performance characteristics, since every container runs in their own cgroup and the Linux kernel provides us with all kind of useful metrics.</p>
<p>Although there are a few other Docker monitoring tools out there, I’ll show you why I think that SoundCloud’s <a href="https://developers.soundcloud.com/blog/prometheus-monitoring-at-soundcloud">newly released</a> <a href="https://prometheus.github.io/">Prometheus</a> is a perfect fit for monitoring container-based infrastructures.</p>
<p>Prometheus features a highly dimensional <a href="http://prometheus.github.io/docs/concepts/data_model/">data model</a> in which a time series is identified by a metric name and a set of key-value pairs. A flexible <a href="http://prometheus.github.io/docs/querying/basics/">query language</a> allows querying and graphing this data. It features advanced <a href="http://prometheus.github.io/docs/concepts/metric_types/">metric types</a> like summaries, building <a href="http://prometheus.github.io/docs/querying/functions/#rate()">rates</a> from totals over specified time spans or <a href="http://prometheus.github.io/docs/querying/rules/">alerting</a> on any expression and has no dependencies, making it a dependable system for debugging during outages.</p>
<p>I will focus on why especially the data model and query language makes it such a good fit in a containerized, dynamic infrastructure where you think in clusters of services instead of single instances and servers as cattle instead of pets.</p>
<h3>Classic Approach</h3>
<p>Let’s say you want to monitor the memory usage of your containers. Without support for dimensional data, such a metric for the container named <code class="language-text">webapp123</code> might be called <code class="language-text">container_memory_usage_bytes_webapp123</code>.</p>
<p>But what if you want to show the memory usage of all your <code class="language-text">webapp123</code> containers? More advanced monitoring solutions like <a href="https://github.com/graphite-project">graphite</a> support that. It features a hierarchic, tree-like data model in which such metric might be called <code class="language-text">container.memory_usage_bytes.webapp123</code>. Now you can use wildcards like <code class="language-text">container.memory_usage_bytes.webapp*</code> to graph the memory usage of all your ‘webapp’ containers. Graphite also supports functions like <code class="language-text">sum()</code> to aggregate the memory usage of your application across all your machines by using an expression like <code class="language-text">sum(container.memory_usage_bytes.webapp*)</code>.</p>
<p>That’s all great and very useful, but limited. What if you don’t want to aggregate all containers with a given name but with a given image? Or you want to compare the deployments to your canary with those on your prod machines?</p>
<p>It’s possible to come up with a hierarchy for each use case, but not one to support them all. And reality shows, you often don’t know in advance which questions you need to answer once things go dark and you start investigating.</p>
<h3>Prometheus</h3>
<p>With Prometheus’s support for dimensional data, you can have global and straightforward metric names like <code class="language-text">container_memory_usage_bytes</code> with multiple dimensions to identify the specific instances of your service.</p>
<p>I’ve created a simple <a href="https://github.com/docker-infra/container_exporter">container-exporter</a> to gather Docker Container metrics and expose them for Prometheus to consume. This exporter uses the container’s name, id and image as dimensions. Additional per-exporter dimension can be set in the <code class="language-text">prometheus.conf</code>.
If you use the metric name directly as a query expression, it will return all time series with their labels for this metric name:</p>
<div class="gatsby-highlight">
      <pre class="language-text"><code class="language-text">container_memory_usage_bytes{env=&quot;prod&quot;,id=&quot;23f731ee29ae12fef1ef6726e2fce60e5e37342ee9e35cb47e3c7a24422f9e88&quot;,instance=&quot;http://1.2.3.4:9088/metrics&quot;,job=&quot;container-exporter&quot;,name=&quot;haproxy-exporter-int&quot;,image=&quot;prom/haproxy-exporter:latest&quot;}	11468800.000000
container_memory_usage_bytes{env=&quot;prod&quot;,id=&quot;57690ddfd3bb954d59b2d9dcd7379b308fbe999bce057951aa3d45211c0b5f8c&quot;,instance=&quot;http://1.2.3.5:9088/metrics&quot;,job=&quot;container-exporter&quot;,name=&quot;haproxy-exporter&quot;,image=&quot;prom/haproxy-exporter:latest&quot;}	16809984.000000
container_memory_usage_bytes{env=&quot;prod&quot;,id=&quot;907ac267ebb3299af08a276e4ea6fd7bf3cb26632889d9394900adc832a302b4&quot;,instance=&quot;http://1.2.3.2:9088/metrics&quot;,job=&quot;container-exporter&quot;,name=&quot;node-exporter&quot;,image=&quot;prom/container-exporter:latest&quot;}
...
...</code></pre>
      </div>
<p>If you run lot of containers, this looks something like this:</p>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/static/container_memory_usage_bytes-065a19374aba5620f406a9361ff35444-fd026.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; ; max-width: 590px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 71.39240506329114%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsSAAALEgHS3X78AAACGklEQVQoz4VR2W7aUBD1H/Yb+kl97x/0oVWVhbKENA5LCAlWqHAwYJYEgvF+fX13m47tplJaVT06uvfOmbE8Z0YzTXNkGA8lDMNYr9eUUoxx+gp4ckr2Pnr3Yfz+o5kSyNM8zy3L0lzPdQ4OwHXdOI6hWgGy7BcrZJlUKkI8xhwiIcTxeFzYtrbbboMg3O22K8ByOZvNLGv6G0VUhnAt7fliPoM3NGvbC13XNWe/dz3/4Hoowdvdfrna7B03jGKgH4TrzfPeOXh+AFzYS0glCYliRJmYTEyNEEIZQ+CRsiQlmJAUJMYqQlgojEEWF1laiSrPH6dTDUxKCU6AApgVJ5flqQpdFNmSWSaqUAgGnsFR8XGWZcd/I8//VKr6YmDQI+E0IgixNHlLVDKm+I0IISXqeDRhVWBRKimLVrl6bayyoEpFSsYlK/SqBjYlKfzemj3+v+2/UdXbVduY4BfnefuyQTjyva3ne0yIJHbjcAdDCiLvabeKkXc4OEEYSgFDVeXAZprgcv00H45a40n3ZnR196PTG9b695f3427//qJ3174dNQajdmdQNybXhtm9Hevj6fBhelNrftEY45xhSiJCQkoRFymlIUI+7ENKEoWOFImSKedYqVSKGJiSIEncycQoBmaurJPrxle9ddZptgaN1uCi3m/XB+16/7I11M96l7Veu3nTPL+qn37/dq7XT65qtf7Fp9PPPwEqYAWEaDEQMwAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="container_memory_usage_bytes.png"
        title=""
        src="/static/container_memory_usage_bytes-065a19374aba5620f406a9361ff35444-fb8a0.png"
        srcset="/static/container_memory_usage_bytes-065a19374aba5620f406a9361ff35444-1a291.png 148w,
/static/container_memory_usage_bytes-065a19374aba5620f406a9361ff35444-2bc4a.png 295w,
/static/container_memory_usage_bytes-065a19374aba5620f406a9361ff35444-fb8a0.png 590w,
/static/container_memory_usage_bytes-065a19374aba5620f406a9361ff35444-fd026.png 790w"
        sizes="(max-width: 590px) 100vw, 590px"
      />
    </span>
  </span>
  
  </a>
    </p>
<p>To help you make sense of this data, you can filter and/or aggregate these metrics</p>
<h4>Slice &#x26; Dice</h4>
<p>With Prometheus’s query language, you can slice and dice data by any dimension you want. If you’re interested in all containers with a given name, you can use an expression like <code class="language-text">container_memory_usage_bytes{name=&quot;consul-server&quot;}</code>, which would show only the time series for which <code class="language-text">name == &quot;consul-server&quot;</code>.
Prometheus also supports regular expressions, so instead of matching the full script you can do <code class="language-text">container_memory_usage_bytes{name=~&quot;^consul&quot;}</code>, which would show something like this:</p>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/static/container_memory_usage_bytes_consul-2a7a760e3618b0ac5e2f4d9ba57082c5-8dc3d.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; ; max-width: 590px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 66.50998824911868%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAABeElEQVQoz4VSW27CMBDMeXuNXqVH6FUKSVClIoQohcQhD9u7azudjVtA7QeriTN+rHc8dtH3l9Pp1DZt0zRt2xpjegxdLiwSQkAzp3ju6enl/fl1N89zSnOOlFLRdd3hcDh+HhFIG4bBOWet9d4TkV/COm86ZzrrNNDz+GG8QNnz6bzf73e7XVmWq9WqLKu6rquqAl+v1yDolOu3TV1t6jqjKsuP7bYYhxHFp2nEdm3bGNNiWyYCjOmGvp8mO4zT8fhl+nF0PFjfW7KeY4wFPkdsSQDHQHDgnh0tHJDoOBIJWcvTyHbS1jscW5MRcAEf2owbR4gkZ5N3KQS1awG4Gqaz8CZv+Yu7rhIRoRh9CFeQiFbGhBrH0EloM+65puHGVF26IsSlcpY9PwosjQEpMSPkyqof++JFsMSF3HMQlQEDPQvdwMSajGfEaiUk0m0OPK9mSTH9l4YxlS3LM3yk+e+IXlB2O+hphGFh5KxbIDf88Ny95wv0zN9r5fEh8xVSsAAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="container_memory_usage_bytes_consul.png"
        title=""
        src="/static/container_memory_usage_bytes_consul-2a7a760e3618b0ac5e2f4d9ba57082c5-fb8a0.png"
        srcset="/static/container_memory_usage_bytes_consul-2a7a760e3618b0ac5e2f4d9ba57082c5-1a291.png 148w,
/static/container_memory_usage_bytes_consul-2a7a760e3618b0ac5e2f4d9ba57082c5-2bc4a.png 295w,
/static/container_memory_usage_bytes_consul-2a7a760e3618b0ac5e2f4d9ba57082c5-fb8a0.png 590w,
/static/container_memory_usage_bytes_consul-2a7a760e3618b0ac5e2f4d9ba57082c5-8dc3d.png 851w"
        sizes="(max-width: 590px) 100vw, 590px"
      />
    </span>
  </span>
  
  </a>
    </p>
<p>You can use any other dimension for filtering as well, so you can get metrics about all containers on a given host, in a given environment or zone.</p>
<h4>Aggregation</h4>
<p>Similar to Graphite, Prometheus supports aggregation functions but due to its dimensions this gets even more powerful. Summing up the memory usage of all your “consul-*” works as expected with <code class="language-text">sum(container_memory_usage_bytes{name=~&quot;^consul&quot;})</code>.</p>
<p>Now let’s say you want to see the difference in average memory usage between your ‘consul’ and ‘consul-server’ containers. This is achieved by providing the dimensions to keep in the aggregated result like this <code class="language-text">avg(container_memory_usage_bytes{name=~&quot;^consul&quot;}) by (name)</code>:</p>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/static/container_memory_usage_bytes_consul_by_name-1-b0d3d92bda3203b73787ae1285ca75bc-e00a9.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; ; max-width: 590px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 76.15112160566706%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsSAAALEgHS3X78AAABlElEQVQoz5WSy0rDQBSG84x2IT6AuvMRBAtVEStSXfgGWgviShAFF76BQi4KQqXS5p4m6SQzc2bimcS2USvYP3/gn8uXcyaJFkWR67q+7wdBEIYhhjEqjjHjEsmyQkKQ5lvnb9vX/aKQdWm4c2SPHNfxPC8tldfEGAPOKeNOmHlRzjlnpXgpzXEc27YHg0G//26apq7rppJlWS+GYRo63paFY0N/tcxqg1EKsxaPx9hxkiSEENdzPc8nE7zSeBINnQ/HHwaxFyb+YNgPogCAF6WwZ1VZoECUE8ogIQeSwwQkF1IICWipgpCFMCy9tdvaO2g9PN4joQGHnBEKysggibtnjy+mqrI9snu9Xvei+/T8pGB1cKiKKBeyakJ+Z7/42VQVFAwAPyr8zrMZKIUvfDm4PqyQ/8L1npeG/6yMEnPV4B8HruU5jMS3V8KoYAwNlHL6ldGc5rMlmmfq30bg7vbmuL1/dnraaR9eXXZ5RqA0BpomMB3SNOVkUmWWESyp4JPO0drqyvrGZqPR2Gk2F36khfoExtdVxGghHGUAAAAASUVORK5CYII='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="container_memory_usage_bytes_consul_by_name"
        title=""
        src="/static/container_memory_usage_bytes_consul_by_name-1-b0d3d92bda3203b73787ae1285ca75bc-fb8a0.png"
        srcset="/static/container_memory_usage_bytes_consul_by_name-1-b0d3d92bda3203b73787ae1285ca75bc-1a291.png 148w,
/static/container_memory_usage_bytes_consul_by_name-1-b0d3d92bda3203b73787ae1285ca75bc-2bc4a.png 295w,
/static/container_memory_usage_bytes_consul_by_name-1-b0d3d92bda3203b73787ae1285ca75bc-fb8a0.png 590w,
/static/container_memory_usage_bytes_consul_by_name-1-b0d3d92bda3203b73787ae1285ca75bc-e00a9.png 847w"
        sizes="(max-width: 590px) 100vw, 590px"
      />
    </span>
  </span>
  
  </a>
    </p>
<p>If you have services in multiple zones and configure the zone name as an additional label pair, you can also keep that dimension to show the memory usage per name and zone by using an expression like <code class="language-text">avg(container_memory_usage_bytes{name=~&quot;^consul&quot;}) by (name,zone)</code>.</p>
<h4>Using Prometheus + Container-Exporter</h4>
<p>As you know, I like to run everything in containers, including the container-exporter and Prometheus itself. Running the <a href="https://github.com/docker-infra/container_exporter">container-exporter</a> should be as easy as this:</p>
<div class="gatsby-highlight">
      <pre class="language-text"><code class="language-text">docker run -p 8080:8080 -v /sys/fs/cgroup:/cgroup \
           -v /var/run/docker.sock:/var/run/docker.sock prom/container-exporter</code></pre>
      </div>
<p>Now you need to install Prometheus. For that refer to the <a href="http://prometheus.github.io/docs/introduction/install/">official documentation</a>. To make Prometheus pull the metrics from the container-exporter, you need to add it as a target to the configuration. For example:</p>
<div class="gatsby-highlight">
      <pre class="language-text"><code class="language-text">job: {
  name: &quot;container-exporter&quot;
  scrape_interval: &quot;1m&quot;
  target_group: {
  	labels: {
	    label: {
    		name: &quot;zone&quot;
        	value: &quot;us-east-1&quot;
	    }
        label: {
        	name: &quot;env&quot;
            value: &quot;prod&quot;
        }
    }
    target: &quot;http://1.2.3.4:8080/metrics&quot;
  }
}</code></pre>
      </div>
<p>Now rebuild your image as described in the documentation and start it. Prometheus should now poll your container-exporter every 60s.</p>
<h3>Conclusion</h3>
<p>Because of Prometheus flexibility, its performance and minimal requirements, it’s the monitoring system of my choice.
This is why I introduced Prometheus beginning last year at Docker where we use it as our primary monitoring system.</p></div><hr style="margin-bottom:1.45rem;" data-reactid="9"/><div style="display:flex;margin-bottom:3.625rem;" data-reactid="10"><img src="/static/profile-pic.c22be3bb.jpg" alt="Johannes Ziemke" style="margin-right:0.725rem;margin-bottom:0;width:2.9rem;height:2.9rem;" data-reactid="11"/><p data-reactid="12"><!-- react-text: 13 -->By <!-- /react-text --><strong data-reactid="14">Johannes Ziemke</strong><!-- react-text: 15 -->.<!-- /react-text --><!-- react-text: 16 --> <!-- /react-text --><br data-reactid="17"/><!-- react-text: 18 -->You can <!-- /react-text --><strong data-reactid="19"><a href="/hire-me" data-reactid="20">hire me</a></strong><!-- react-text: 21 -->.<!-- /react-text --></p><span style="margin-left:auto;" data-reactid="22"><a href="https://twitter.com/discordianfish" data-reactid="23"><i class="icon-twitter" data-reactid="24"></i></a><a href="https://github.com/discordianfish" data-reactid="25"><i class="icon-github-circled" data-reactid="26"></i></a></span></div><ul style="list-style:none;padding:0;margin:0;" data-reactid="27"><li style="display:inline;" data-reactid="28"><a rel="prev" href="/2015/01/08/containerized-infrastructure/" data-reactid="29"><!-- react-text: 30 -->← <!-- /react-text --><!-- react-text: 31 -->Containerize your Infrastructure<!-- /react-text --></a></li><li style="display:inline;float:right;" data-reactid="32"><a rel="next" href="/2015/01/27/find-ghosts-in-your-docker-images/" data-reactid="33"><!-- react-text: 34 -->Find GHOSTs in your Docker images<!-- /react-text --><!-- react-text: 35 --> →<!-- /react-text --></a></li></ul></div><span style="display:block;clear:both;" data-reactid="36"> </span></div></div><script id="webpack-manifest">/*<![CDATA[*/window.webpackManifest={"231608221292675":"app-4bea43eaf62c6707085c.js","99219681209289":"component---node-modules-gatsby-plugin-offline-app-shell-js-5c4c5a0f7af9dc69d6d7.js","107818501498521":"component---src-templates-blog-post-js-3641edfbbd92534946e5.js","35783957827783":"component---src-pages-index-js-8880216de35f54c56d6b.js","60335399758886":"path----53603862bdf9f040a0e4.js","210333531512890":"path---offline-plugin-app-shell-fallback-a0e39f21c11f6a62c5ab.js","176796638445973":"path---2018-02-17-found-severe-azure-kubernetes-bug-and-aint-even-got-a-lousy-t-shirt-4711b1b123fb78288972.js","99864164588419":"path---2018-02-01-kubecfn-cloudformation-installer-for-reasonably-secure-multi-master-kubernetes-cluster-ed1e3b3b05dc1506c95e.js","214880966025118":"path---2017-12-15-production-grade-kubernetes-947bb3b035cb8d285b80.js","263596615691880":"path---2017-11-09-use-prometheus-vector-matching-to-get-kubernetes-utilization-across-any-pod-label-32dbb5ab6613998b15db.js","33143188725548":"path---2017-04-17-selenium-webdriver-chromedriver-nightwatch-chrome-headless-06c95f85d268f8edaac0.js","162183589928130":"path---2016-11-20-15-producation-grade-kubernetes-cluster-a0aa5bdba7cc2c65fde9.js","41627737030171":"path---2015-10-05-the-future-fabrication-cloud-3f789164f7a30243d066.js","74228480928951":"path---2015-10-02-the-future-c00fc3df3b25cd7a1c21.js","229428869920157":"path---2015-09-02-uploaded-thousands-of-photos-to-google-photos-here-are-the-best-classification-mistakes-670b620c10dd995dded8.js","173914803063736":"path---2015-08-31-dont-manage-config-unless-you-have-to-42ef5ccf73b6ca8d3e57.js","21869895544540":"path---2015-04-27-cloudformation-driven-consul-in-autoscalinggroup-b5b4ca2c3169d93715ea.js","23322709388340":"path---2015-04-22-scope-and-ownership-in-tech-companies-5e9f3f20e8f2ce93d9c2.js","200459074764225":"path---2015-03-13-building-aws-amis-from-scratch-6c07f1f2c5e2bec8ba14.js","266226263243380":"path---2015-02-10-prometheus-on-raspberry-pi-f85760624b92bf379024.js","114328391656268":"path---2015-01-27-find-ghosts-in-your-docker-images-ae66f97d6c7c2cb88969.js","119570531827300":"path---2015-01-26-monitor-docker-containers-with-prometheus-41620a92db4e19f15cc1.js","7844381199199":"path---2015-01-08-containerized-infrastructure-b820dfc0b82c60e4e0d0.js","48650439439500":"path---2014-11-13-using-docker-run-netcontainerxx-to-debug-network-issues-cdaf59de0be41002454f.js","228256526782408":"path---2014-11-10-running-a-highly-available-load-balancer-on-docker-36268ae291d25c66f3ec.js","273472638405565":"path---hire-me-d6df18bf1039fb19c7d0.js","142629428675168":"path---index-f6f61a0b44435de0d280.js","114276838955818":"component---src-layouts-index-js-e4ac5a74a4e0c6af744e.js"}/*]]>*/</script><script>/*<![CDATA[*/["/commons-fcbb8af1639fee4f6844.js","/app-4bea43eaf62c6707085c.js","/path---2015-01-26-monitor-docker-containers-with-prometheus-41620a92db4e19f15cc1.js","/component---src-templates-blog-post-js-3641edfbbd92534946e5.js","/component---src-layouts-index-js-e4ac5a74a4e0c6af744e.js"].forEach(function(s){document.write('<script src="'+s+'" defer></'+'script>')})/*]]>*/</script></body></html>