{"data":{"site":{"siteMetadata":{"title":"5π Consulting","author":"Johannes 'fish' Ziemke"}},"markdownRemark":{"id":"21b75828-4319-5f03-b011-11a7bff52344","html":"<p>Prometheus was designed for dynamic environments like Kubernetes. Its powerful\nservice discovery and query language allows you to answer all kind of questions\nthat come up while operating a Kubernetes cluster.</p>\n<p>This flexibility comes with a somewhat steeper learning curve than some\nalternatives and hosted services, with <a href=\"https://prometheus.io/docs/prometheus/latest/querying/operators/#vector-matching\">Vector\nMatching</a>\nbeing one of the more advanced topics.</p>\n<p>I’m not going into the details which the excellent <a href=\"https://prometheus.io/docs/prometheus/latest/querying/operators/#vector-matching\">Prometheus\nDocumentation</a>\nhas already covered but walk you through some useful queries to get resource\nutilization in a Kubernetes cluster.</p>\n<h2 id=\"aggregated-memory-usage-per-label\"><a href=\"#aggregated-memory-usage-per-label\" aria-label=\"aggregated memory usage per label permalink\" class=\"anchor\"></a>Aggregated memory usage per label</h2>\n<p>Kubernetes provides a <code class=\"language-text\">container_memory_usage_bytes</code> metric reflecting each pods\nmemory usage, e.g:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">...\ncontainer_memory_usage_bytes{beta_kubernetes_io_arch=&quot;amd64&quot;,beta_kubernetes_io_fluentd_ds_ready=&quot;true&quot;,beta_kubernetes_io_instance_type=&quot;g1-small&quot;,beta_kubernetes_io_os=&quot;linux&quot;,cloud_google_com_gke_nodepool=&quot;small-preemptible&quot;,cloud_google_com_gke_preemptible=&quot;true&quot;,container_name=&quot;POD&quot;,failure_domain_beta_kubernetes_io_region=&quot;us-east1&quot;,failure_domain_beta_kubernetes_io_zone=&quot;us-east1-c&quot;,id=&quot;/kubepods/burstable/pod13d4221c-c484-11e7-bff5-42010af0018b/67e5bb069ab9881ff8a55b8628ef4935b0d1ace09c18df20db059522bdfd5b7d&quot;,image=&quot;gcr.io/google_containers/pause-amd64:3.0&quot;,instance=&quot;gke-latency-at-small-preemptible-0c981b61-9489&quot;,job=&quot;kubernetes-cadvisor&quot;,kubernetes_io_hostname=&quot;gke-latency-at-small-preemptible-0c981b61-9489&quot;,name=&quot;k8s_POD_latency-api-971504058-jzs5h_default_13d4221c-c484-11e7-bff5-42010af0018b_0&quot;,namespace=&quot;default&quot;,pod_name=&quot;latency-api-971504058-jzs5h&quot;}\t389120\ncontainer_memory_usage_bytes{beta_kubernetes_io_arch=&quot;amd64&quot;,beta_kubernetes_io_fluentd_ds_ready=&quot;true&quot;,beta_kubernetes_io_instance_type=&quot;g1-small&quot;,beta_kubernetes_io_os=&quot;linux&quot;,cloud_google_com_gke_nodepool=&quot;small-preemptible&quot;,cloud_google_com_gke_preemptible=&quot;true&quot;,container_name=&quot;POD&quot;,failure_domain_beta_kubernetes_io_region=&quot;us-east1&quot;,failure_domain_beta_kubernetes_io_zone=&quot;us-east1-c&quot;,id=&quot;/kubepods/burstable/pod81d0f651-c500-11e7-bff5-42010af0018b/309e05b118e618122c70ccf88538d13ca41c3b5a770d5d67882426854391c23c&quot;,image=&quot;gcr.io/google_containers/pause-amd64:3.0&quot;,instance=&quot;gke-latency-at-small-preemptible-0c981b61-9489&quot;,job=&quot;kubernetes-cadvisor&quot;,kubernetes_io_hostname=&quot;gke-latency-at-small-preemptible-0c981b61-9489&quot;,name=&quot;k8s_POD_latency-api-971504058-gszpw_default_81d0f651-c500-11e7-bff5-42010af0018b_0&quot;,namespace=&quot;default&quot;,pod_name=&quot;latency-api-971504058-gszpw&quot;}\t372736\ncontainer_memory_usage_bytes{beta_kubernetes_io_arch=&quot;amd64&quot;,beta_kubernetes_io_fluentd_ds_ready=&quot;true&quot;,beta_kubernetes_io_instance_type=&quot;g1-small&quot;,beta_kubernetes_io_os=&quot;linux&quot;,cloud_google_com_gke_nodepool=&quot;small-preemptible&quot;,cloud_google_com_gke_preemptible=&quot;true&quot;,container_name=&quot;latency-api&quot;,failure_domain_beta_kubernetes_io_region=&quot;us-east1&quot;,failure_domain_beta_kubernetes_io_zone=&quot;us-east1-c&quot;,id=&quot;/kubepods/burstable/pod13d4221c-c484-11e7-bff5-42010af0018b/497e6fdf2217771cb3f52e6fef93734d023f0e7f23f92c58d22139fc18dc5f13&quot;,image=&quot;registry.gitlab.com/latency.at/latencyat@sha256:8ea057e064b64cc9c8459a68ef3f6d0fc26169b4f57aef193831779e1fe713d4&quot;,instance=&quot;gke-latency-at-small-preemptible-0c981b61-9489&quot;,job=&quot;kubernetes-cadvisor&quot;,kubernetes_io_hostname=&quot;gke-latency-at-small-preemptible-0c981b61-9489&quot;,name=&quot;k8s_latency-api_latency-api-971504058-jzs5h_default_13d4221c-c484-11e7-bff5-42010af0018b_1&quot;,namespace=&quot;default&quot;,pod_name=&quot;latency-api-971504058-jzs5h&quot;}\t11014144\ncontainer_memory_usage_bytes{beta_kubernetes_io_arch=&quot;amd64&quot;,beta_kubernetes_io_fluentd_ds_ready=&quot;true&quot;,beta_kubernetes_io_instance_type=&quot;g1-small&quot;,beta_kubernetes_io_os=&quot;linux&quot;,cloud_google_com_gke_nodepool=&quot;small-preemptible&quot;,cloud_google_com_gke_preemptible=&quot;true&quot;,container_name=&quot;latency-api&quot;,failure_domain_beta_kubernetes_io_region=&quot;us-east1&quot;,failure_domain_beta_kubernetes_io_zone=&quot;us-east1-c&quot;,id=&quot;/kubepods/burstable/pod81d0f651-c500-11e7-bff5-42010af0018b/7b438a8e9df0cf1ab29d067fd36c97099f9f5e7e9257f6187c5be6bff846a62c&quot;,image=&quot;registry.gitlab.com/latency.at/latencyat@sha256:8ea057e064b64cc9c8459a68ef3f6d0fc26169b4f57aef193831779e1fe713d4&quot;,instance=&quot;gke-latency-at-small-preemptible-0c981b61-9489&quot;,job=&quot;kubernetes-cadvisor&quot;,kubernetes_io_hostname=&quot;gke-latency-at-small-preemptible-0c981b61-9489&quot;,name=&quot;k8s_latency-api_latency-api-971504058-gszpw_default_81d0f651-c500-11e7-bff5-42010af0018b_0&quot;,namespace=&quot;default&quot;,pod_name=&quot;latency-api-971504058-gszpw&quot;}\t11448320\n...</code></pre></div>\n<p>Unfortunately it doesn’t contain the pod labels. For that there is the\n<code class=\"language-text\">kube_pod_labels</code> though which includes a static timeseries with all labels and\nthe pod name. This metric is provided by\n<a href=\"https://github.com/kubernetes/kube-state-metrics\">kube-state-metrics</a>.</p>\n<p>We can use it to look up the labels for the pod from the\ntimeseries (<code class=\"language-text\">pod_name=&quot;latency-api-971504058-jzs5h&quot;</code>):</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">kube_pod_labels{instance=&quot;10.116.0.12:8080&quot;,job=&quot;kubernetes-service-endpoints&quot;,k8s_app=&quot;kube-state-metrics&quot;,kubernetes_name=&quot;kube-state-metrics&quot;,kubernetes_namespace=&quot;kube-system&quot;,label_app=&quot;latency-api&quot;,label_pod_template_hash=&quot;971504058&quot;,namespace=&quot;default&quot;,pod=&quot;latency-api-971504058-jzs5h&quot;} 1\nkube_pod_labels{instance=&quot;10.116.1.26:8080&quot;,job=&quot;kubernetes-service-endpoints&quot;,k8s_app=&quot;kube-state-metrics&quot;,kubernetes_name=&quot;kube-state-metrics&quot;,kubernetes_namespace=&quot;kube-system&quot;,label_app=&quot;latency-api&quot;,label_pod_template_hash=&quot;971504058&quot;,namespace=&quot;default&quot;,pod=&quot;latency-api-971504058-jzs5h&quot;} 1</code></pre></div>\n<p>Both metrics can be merged by using vector matching. We get this metric twice\nbecause there are two instances of kube-state-metrics running. So before we\ncontinue further, we aggregate both. Since they should be identical, we can use\nmin/max to aggregate. Since we later want to aggregate on <code class=\"language-text\">label_app</code>, we need\nto keep that label. We also need to keep the <code class=\"language-text\">pod</code> label to join both metrics\non. We can preserve them by specifying them in the BY clause. Since the pod\nlabel is called <code class=\"language-text\">pod</code> in <code class=\"language-text\">kube_pod_labels</code> but <code class=\"language-text\">pod_name</code> in\n<code class=\"language-text\">container_memory_usage_bytes</code>, we need to also use label_replace to rename the\nlabel. This gives us:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">max by (pod_name,label_app) (\n  label_replace(kube_pod_labels{label_app!=&quot;&quot;},&quot;pod_name&quot;,&quot;$1&quot;,&quot;pod&quot;,&quot;(.*)&quot;)\n)</code></pre></div>\n<p>Which returns something like:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">...\n{label_app=&quot;latency-api&quot;,pod_name=&quot;latency-api-971504058-n8k6d&quot;}  1\n{label_app=&quot;latency-api&quot;,pod_name=&quot;latency-api-971504058-jzs5h&quot;}  1\n...</code></pre></div>\n<p>Now we can use vector matching to join <code class=\"language-text\">container_memory_usage_bytes</code> with the\nresult of our expression. We use the <code class=\"language-text\">*</code> operator which effectivly is a no-op\nsince it will multiply the memory usage by the matched timeseries value in\n<code class=\"language-text\">kube_pod_labels</code> which is always 1.</p>\n<p>We need to specify <code class=\"language-text\">group_left</code> because there are multiple\n<code class=\"language-text\">container_memory_usage_bytes</code> timeseries for each pod, one for each container.\nSince we want to preserve the <code class=\"language-text\">label_app</code> label, we specify it as argument to <code class=\"language-text\">group_left</code>.</p>\n<p>This gives us:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">  container_memory_usage_bytes * on (pod_name) group_left(label_app)\n  max by (pod_name,label_app) (\n    label_replace(kube_pod_labels{label_app!=&quot;&quot;},&quot;pod_name&quot;,&quot;$1&quot;,&quot;pod&quot;,&quot;(.*)&quot;)\n  )</code></pre></div>\n<p>To aggregated the memory usage of all your pods, summed by a <code class=\"language-text\">k8s-app</code> label you\ncan use the following expression:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sum by (label_app,namespace) (\n  container_memory_usage_bytes * on (pod_name) group_left(label_app)\n  max by (pod_name,label_app) (\n    label_replace(kube_pod_labels{label_app!=&quot;&quot;},&quot;pod_name&quot;,&quot;$1&quot;,&quot;pod&quot;,&quot;(.*)&quot;)\n  )\n)</code></pre></div>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0f0a37acb794c49740014ce150e3ae1f/9435c/mem_per_app.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 79.38144329896907%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsSAAALEgHS3X78AAACRElEQVQ4y5VTW24TQRDcg/jLf/6whOADJ1Yi28hPya/4Br4HCgQQQoJTBCkovgC5gi9BHNsB4pAEvLszs48punv9iKMEhZFqe2Z7pra6ptex1iIMQyilJGqt4fs+XNfFfD6HMWaVZ/Ca857ngc/ehcOPwASCOI4RRZGASYIgkDm/5zVjmQuDZH9sYyGSOcHhF9pX0J7CclhKwGI97O3FeghJRB/TAYzSiMIIzkqNNtCuokhJT8P4Wg7YW8x8OKZDgTIbiLmKaKlwIZUPhmZZYgR/7opqJg/IN+35Ugkr4XLDhR08oihcYKFQa9rIMKTMKIFSHnzPxfXPGZTvCZI8fSAg0jCQPXxOa1/AlTpsPN+cfcAji/v9W9trN/Ynt8ztQGoMtUISk3nA0EbyEZtO8wTkL4M7Q0DvaA976djY4ub3DS5+zTC7usSlYIaLK17PqN/m+ONeY/JjjPH5GJPvU4oTjM5H+DY5xel0hLPpGUYUPeXDYanD4RCHnw8xGAwEx6t4jKMvRzg5+brwlbxij8lDbbTMZW2SdUSXKYSv9l/i2dMnKBZL2N3dFRQKBeRyOaTTadRqNWmLxwwhfP3mHfL5HbRaTdTrdTQaDUGxWEQmk0Gn01m1yH2/28avx5vevj9AfmdLSCqVCqrVqqhihalUCu12+z8JD4hwe1sImWxJuiy52WxKS9xtkwdL3ifC51ukkMplMlZXKpWEMJvNotvtStM+mvDTxw94USpgb68nfjFarRZ6vR7K5TL6/f5Gyf8afwEmkHH4kHQEfAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"mem_per_app\"\n        title=\"\"\n        src=\"/static/0f0a37acb794c49740014ce150e3ae1f/dbb61/mem_per_app.png\"\n        srcset=\"/static/0f0a37acb794c49740014ce150e3ae1f/19bd1/mem_per_app.png 163w,\n/static/0f0a37acb794c49740014ce150e3ae1f/d3bcb/mem_per_app.png 325w,\n/static/0f0a37acb794c49740014ce150e3ae1f/dbb61/mem_per_app.png 650w,\n/static/0f0a37acb794c49740014ce150e3ae1f/9435c/mem_per_app.png 970w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n      />\n  </span>\n  </a></p>\n<h2 id=\"cpu-and-io-usage-per-label\"><a href=\"#cpu-and-io-usage-per-label\" aria-label=\"cpu and io usage per label permalink\" class=\"anchor\"></a>CPU and IO usage per label</h2>\n<p>Now that we know how to join the <code class=\"language-text\">kube_pod_labels</code> metric with cadvisor metrics,\nwe can figure out usage of other resources too.</p>\n<h3 id=\"cpu\"><a href=\"#cpu\" aria-label=\"cpu permalink\" class=\"anchor\"></a>CPU</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sum by (label_app,namespace) (\n  rate(container_cpu_usage_seconds_total[2m]) * on (pod_name) group_left(label_app)\n  max by (pod_name,label_app) (\n    label_replace(kube_pod_labels{label_app!=&quot;&quot;},&quot;pod_name&quot;,&quot;$1&quot;,&quot;pod&quot;,&quot;(.*)&quot;)\n  )\n)</code></pre></div>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ee8bde4b930678ada8505a9cc8e749ba/9435c/cpu_per_app.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 79.38144329896907%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsSAAALEgHS3X78AAACR0lEQVQ4y5WTzW4SURTHeZCu2LEgUTfSEkAwUCDhq7wB72Eaq8aY6FvYpCZ04cpAxYWbmhJakKqgViENlE7LlzPADF9/7zkwLSWEtDf555577p3fPeeeM4bxeIzBYIBut8uzqqpsK4oCWZahaRr7e70ei9a03+l0QN/OyzAcDq8+IptmUr/fZ5Fv1q/btDcajXg9Oxv0AzTohmVjfl+PamITdHANXBT+vCiCRX4a/b7KYiCFfxugHuAi4L/2mXjXxvIIaWhaR6Si8VpTFVGQhjivTf19UUSZdVbNQ5Evbr6hqnY5Lf1NJkBF3FwXoBYkqYha7VhUXxIVbwm10WyUcXHxE+XSvjjXnACVtgylJUOqVtC6rPNaqlTQlOoon2RQ+JbCaekQvwop/C5+Qulkf6ovPBe/7+HH8Qd0CUipyO0GGlIVdamCy/Myzmt/2a5Lpyj9SaNQ+Iz81xQymQSyR0nksgmk0++RO0ogn0sie0j+jyJlAaS0DtIH2N5+i93dOCsej1/ZOzvvkEjuceFUlXqT+lE803Ak5tHEnor7kICbm0/w4P49OJ1O2O122Gx2OBwOWCwWGI1GeL1ebtybvTjbk9c2A58+ewGr1YZgMACfzwe/38+iC0wmE8Lh8A3gMjHw+cstWG2rDPF4PFhfX+eoKMKVlRWEQqE7ArcEcG2NgQTToXrKgUBgpp2W/56TNxTAh6siQpEuwSg6l8vFQLPZjEgkcuv/nYFvXr/CY9cjbGxE+b1IwWAQ0WgUbrcbsVhsQVEWj//2cGesm4V6ogAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"cpu_per_app\"\n        title=\"\"\n        src=\"/static/ee8bde4b930678ada8505a9cc8e749ba/dbb61/cpu_per_app.png\"\n        srcset=\"/static/ee8bde4b930678ada8505a9cc8e749ba/19bd1/cpu_per_app.png 163w,\n/static/ee8bde4b930678ada8505a9cc8e749ba/d3bcb/cpu_per_app.png 325w,\n/static/ee8bde4b930678ada8505a9cc8e749ba/dbb61/cpu_per_app.png 650w,\n/static/ee8bde4b930678ada8505a9cc8e749ba/9435c/cpu_per_app.png 970w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n      />\n  </span>\n  </a></p>\n<h3 id=\"disk-io\"><a href=\"#disk-io\" aria-label=\"disk io permalink\" class=\"anchor\"></a>Disk IO</h3>\n<p>I wanted to show you some disk IO stats too. Unfortunately these are\n<a href=\"https://github.com/kubernetes/kubernetes/issues/55397\">broken</a> once\n<a href=\"https://github.com/kubernetes/kubernetes/issues/55398\">again</a> in Kubernetes.</p>\n<h3 id=\"network\"><a href=\"#network\" aria-label=\"network permalink\" class=\"anchor\"></a>Network</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sum by (label_app,namespace) (\n  rate(container_network_transmit_bytes_total[2m]) * on (pod_name) group_left(label_app)\n  max by (pod_name,label_app) (\n    label_replace(kube_pod_labels{label_app!=&quot;&quot;},&quot;pod_name&quot;,&quot;$1&quot;,&quot;pod&quot;,&quot;(.*)&quot;)\n  )\n)</code></pre></div>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9cdc5336080b286047c358a645a9a8ed/9435c/net_per_app.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 79.38144329896907%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsSAAALEgHS3X78AAACEElEQVQ4y5VTS24aQRCdg7BixwIp8ibYyOCZiG/EAOYG3CNCdhJFkZJbIDbmAJyBcySb2HyGAYb59XNVDT0GTCKnpZqu7q5+9epVjxHHMYIgwHa7RRiG2O124q/Xa7iuC9/3Zd/zPDFe8/lms4FS6pUZHKwvRVEkMyfQdrh/GsNkeH04G/xh00PFdEBM/ncwOwFkZM4mlOkgZmauI76iAJ4jb4uY4s6VqE0TMzRd3oQGXC33WRPm4cpBTGVKkj0bnUzfO2LImpwF3EsROEsCDKD25bEfbtwU6AhQN0WXHAW+AOCg5MBZSKI0xk9iUlkOS+aF7lDMPgX7SwKg6CiM5JK/mENF4UsHuOMkw+lINQw5O11QrCX5EZXDmjErVo0TLJ8esZg9wSHwxeMfzH//Et+Zz2ieYUUx3FyDkafTKYbDIcYPDxiPtY1lHo1GmEwmIotH3eaHz37yTv3EuCqymJ6cAA4Gn3Bx8Q6maaFUKomVy2UUCgVks1nU63WSJX7TexTAu89fUSxew7ZbaDQa+NhsoklmmiZyuRw6nY7o/NJVxc7p005+PXa/fLtH8fpSQKrVKmq1mrBihplMBu12+wjwX5YA3hPg1ZUAMpgG1SW3Wq3091SvmJ0peUCA7y+JIZXLYMzOsiwBzOfz6Ha78vjfDPjzx3d8sG5we9sTvdhs20av10OlUkG/3z/R8O/jGTNndueoXiN5AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"net_per_app\"\n        title=\"\"\n        src=\"/static/9cdc5336080b286047c358a645a9a8ed/dbb61/net_per_app.png\"\n        srcset=\"/static/9cdc5336080b286047c358a645a9a8ed/19bd1/net_per_app.png 163w,\n/static/9cdc5336080b286047c358a645a9a8ed/d3bcb/net_per_app.png 325w,\n/static/9cdc5336080b286047c358a645a9a8ed/dbb61/net_per_app.png 650w,\n/static/9cdc5336080b286047c358a645a9a8ed/9435c/net_per_app.png 970w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n      />\n  </span>\n  </a></p>","frontmatter":{"title":"Use Prometheus Vector Matching to get Kubernetes Utilization across any Pod Label","date":"November 09, 2017","image":{"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsSAAALEgHS3X78AAACYUlEQVQ4y5VT3W4SQRTmPUgarrhEvQELIpUgf00amtKbQngEHsBotNV4YfS+9QqewT5BfZD+UFpta63dZednd/k852yh1GCss/l2ZnbO+fY738zExuMxfN+HUkp6rTU8z4PrunAcB8YYWGtlncHj0WgkMdw4fxYxflljBWEYIggCAZNzMo/5O88ZkzVGSLnhOBQijuFxjF/aUzAjhUkLgxB3GiXMaxwX+gGsNjBKyzw2VUMftUslaQvjaVhl5K9UyAwBqWcCWhPoCELMCFlhGA3ES2OnJXuOKz9g5ZZ8Va4XVUJKfLKCEYSB/DAI2ILIMlGoyWyjKdFo2oQISpHxroOrswta9wTWaomx1ggBx3CevgFzxdh43sm5Hv3Fuzv2zvSikEs1dAS0c00lOlB0VDTDjcAlmpEHn8r1uVyBEgTkX0B2BHyciEM2ZUysV9dX+P7jHOeXF7j4GeHsMpp7notf7iWOvw0wOBng+HSIwekAhyeH2D/ex8HwEEfDIxzRmiErYix37+setne20e/30ev30OvdYufzDnZ3v1A5vvg08c/6RsbSy/xmU5jw1csXePTwAZaWniGfzwsKTwtIp9NYWFjA2toa7tuE8M3WO+Se5LGysoJarYbl5WXU63UUCgUkk0m02+071wxyWG4fmU+uHge+fb+JXH4R9Vod5XIZlUoF1WoVmUwG8XgcrVZr7r2dByHc2iTCbFZUMRmTMpgwkUhgY2PjD4X/KPk1ET7OLk4JWV2xWEQul0MqlUKn0/k/wk8fP+B5qYhms4nV1VVBo9HA+vo6SqUSut3uvQl/A6ShceQTTlwXAAAAAElFTkSuQmCC","width":970,"height":970,"src":"/static/0f0a37acb794c49740014ce150e3ae1f/eb587/mem_per_app.png","srcSet":"/static/0f0a37acb794c49740014ce150e3ae1f/eb587/mem_per_app.png 1x"}}}}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/2017/11/09/use-prometheus-vector-matching-to-get-kubernetes-utilization-across-any-pod-label/","previous":{"fields":{"slug":"/2017/04/17/selenium-webdriver-chromedriver-nightwatch-chrome-headless/"},"frontmatter":{"title":"Frontend Testing Zoo - Or, Nightwatch without Selenium"}},"next":{"fields":{"slug":"/2017/12/15/production-grade-kubernetes/"},"frontmatter":{"title":"Production Grade Kubernetes"}}}}